[gd_resource type="BehaviorTree" load_steps=35 format=3 uid="uid://cg2xvua4lo6hn"]

[ext_resource type="Script" uid="uid://bikf134tdsiij" path="res://ai/tasks/simple/choose_random_position_new.gd" id="1_t05l3"]
[ext_resource type="Script" uid="uid://djo3mj4x0nxec" path="res://ai/tasks/simple/move_to_position_new.gd" id="2_y22fi"]
[ext_resource type="Script" uid="uid://deph4yt3txoal" path="res://ai/tasks/simple/choose_random_position_walk.gd" id="3_cb0o2"]
[ext_resource type="Script" uid="uid://8yjnfi0v1fr6" path="res://ai/tasks/move_to_target.gd" id="5_bj8vr"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_5300l"]
var/direction/name = &"direction"
var/direction/type = 5
var/direction/value = Vector2(0, 0)
var/direction/hint = 0
var/direction/hint_string = "direction the character is tryign to move in"
var/target/name = &"target"
var/target/type = 24
var/target/hint = 0
var/target/hint_string = "Attack target for the character"
var/health/name = &"health"
var/health/type = 2
var/health/value = 0
var/health/hint = 0
var/health/hint_string = "Health of character"
var/state/name = &"state"
var/state/type = 4
var/state/value = ""
var/state/hint = 0
var/state/hint_string = ""

[sub_resource type="BTAlwaysFail" id="BTAlwaysFail_y22fi"]

[sub_resource type="BTAction" id="BTAction_bj8vr"]
script = ExtResource("5_bj8vr")
target_var = &"target"
speed_var = 10
tolerance = 20

[sub_resource type="BBNode" id="BBNode_cb0o2"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_picx7"]
animation_player = SubResource("BBNode_cb0o2")
animation_name = &"attack"

[sub_resource type="BTSequence" id="BTSequence_cb0o2"]
custom_name = "Attack Sequence"
children = [SubResource("BTAlwaysFail_y22fi"), SubResource("BTAction_bj8vr"), SubResource("BTPlayAnimation_picx7")]

[sub_resource type="BBNode" id="BBNode_bj8vr"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_cb0o2"]
animation_player = SubResource("BBNode_bj8vr")
animation_name = &"idle"

[sub_resource type="BTConsolePrint" id="BTConsolePrint_cb0o2"]
text = "idle"

[sub_resource type="BTRandomWait" id="BTRandomWait_nn2mf"]
min_duration = 0.5
max_duration = 1.0

[sub_resource type="BTSequence" id="BTSequence_2icub"]
custom_name = "Idle Sequence"
children = [SubResource("BTPlayAnimation_cb0o2"), SubResource("BTConsolePrint_cb0o2"), SubResource("BTRandomWait_nn2mf")]

[sub_resource type="BTProbability" id="BTProbability_bj8vr"]
run_chance = 0.1
children = [SubResource("BTSequence_2icub")]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_t05l3"]
text = "random hop"

[sub_resource type="BBNode" id="BBNode_y22fi"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_bj8vr"]
animation_player = SubResource("BBNode_y22fi")
animation_name = &"idle"

[sub_resource type="BTAction" id="BTAction_y22fi"]
script = ExtResource("1_t05l3")

[sub_resource type="BTAction" id="BTAction_8g4h7"]
script = ExtResource("2_y22fi")

[sub_resource type="BTWait" id="BTWait_y22fi"]
duration = 0.2

[sub_resource type="BTSequence" id="BTSequence_npfd7"]
custom_name = "Random Move Sequence"
children = [SubResource("BTConsolePrint_t05l3"), SubResource("BTPlayAnimation_bj8vr"), SubResource("BTAction_y22fi"), SubResource("BTAction_8g4h7"), SubResource("BTWait_y22fi")]

[sub_resource type="BTProbability" id="BTProbability_cb0o2"]
children = [SubResource("BTSequence_npfd7")]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_y22fi"]
text = "random walk"

[sub_resource type="BBNode" id="BBNode_t05l3"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_y22fi"]
animation_player = SubResource("BBNode_t05l3")
animation_name = &"idle"

[sub_resource type="BTAction" id="BTAction_hhw6v"]
script = ExtResource("3_cb0o2")
range_min_in_dir = 70.0
range_max_in_dir = 70.0
position_var = &"pos"
dir_var = &"dir"

[sub_resource type="BTAction" id="BTAction_cb0o2"]
script = ExtResource("2_y22fi")

[sub_resource type="BTWait" id="BTWait_picx7"]
duration = 0.2

[sub_resource type="BTSequence" id="BTSequence_bj8vr"]
custom_name = "Random Walk Sequence"
children = [SubResource("BTConsolePrint_y22fi"), SubResource("BTPlayAnimation_y22fi"), SubResource("BTAction_hhw6v"), SubResource("BTAction_cb0o2"), SubResource("BTWait_picx7")]

[sub_resource type="BTProbability" id="BTProbability_t05l3"]
run_chance = 0.9
children = [SubResource("BTSequence_bj8vr")]

[sub_resource type="BTSelector" id="BTSelector_y22fi"]
custom_name = "Walk"
children = [SubResource("BTProbability_bj8vr"), SubResource("BTProbability_cb0o2"), SubResource("BTProbability_t05l3")]

[sub_resource type="BTDynamicSelector" id="BTDynamicSelector_y22fi"]
custom_name = "Slime AI"
children = [SubResource("BTSequence_cb0o2"), SubResource("BTSelector_y22fi")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_5300l")
root_task = SubResource("BTDynamicSelector_y22fi")
